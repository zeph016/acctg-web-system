<MudDialog Class='customdialog'>
    <DialogContent>
        <MudText Class='font18 pa-2'>
            @contentText
        </MudText>
        <MudText Class="font16 mud-text-secondary pa-2">@note</MudText>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel" Variant='Variant.Text'>Cancel</MudButton>
        <MudButton OnClick="Submit" Variant='Variant.Filled' Color="@color">@buttonText</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] MudDialogInstance MudDialog { get; set; } = new MudDialogInstance();
    [Parameter] public string dialogTitle { get; set; } = string.Empty;
    [Parameter] public string contentText { get; set; } = string.Empty;
    [Parameter] public string buttonText { get; set; } = string.Empty;
    [Parameter] public Enums.ActionMode actionMode { get; set; }
    private Color color { get; set; }
    private string note {get;set;} = string.Empty;
    private bool dataFetched;

    public override async Task SetParametersAsync(ParameterView parameters)
    {

        await base.SetParametersAsync(parameters);
    }

    protected override void OnInitialized()
    {
        CheckActionsMode();
        CompletedFetch();
    }

    private void CompletedFetch()
    {
        dataFetched = true;
        Task.Run(StateHasChanged);
    }

    private void Submit()
    {
        MudDialog.Close(DialogResult.Ok(true));
    }

    private void Cancel()
    {
        MudDialog.Cancel();
    }

    private void CheckActionsMode()
    {
        if (actionMode == Enums.ActionMode.Create) {
            contentText = $"Are you sure you want to create {contentText}?";
            buttonText = "Confirm";
            color = Color.Success;
        } else if (actionMode == Enums.ActionMode.Update) {
            contentText = $"Are you sure you want to update {contentText}?";
            buttonText = "Update";
            color = Color.Info;
        } else if (actionMode == Enums.ActionMode.Approve) {
            contentText = $"Are you sure you want to approve {contentText}?";
            buttonText = "Approve";
            color = Color.Info;
        } else if (actionMode == Enums.ActionMode.Cancel) {
            contentText = $"Are you sure you want to cancel {contentText}?";
            buttonText = "Cancel";
            color = Color.Info;
        } else if (actionMode == Enums.ActionMode.Receive) {
            contentText = $"Are you sure you want to receive {contentText}?";
            buttonText = "Receive";
            color = Color.Info;
        } else if(actionMode == Enums.ActionMode.Delete) {
            contentText = $"Are you sure you want to remove {contentText}?";
            buttonText = "Remove";
            color = Color.Info;
        }
        else if(actionMode == Enums.ActionMode.Void)
        {
            contentText = $"Are you sure you want to void {contentText}?";
            buttonText = "Void";
            color = Color.Info;
        }
        else if(actionMode == Enums.ActionMode.Released)
        {
            contentText = $"Are you sure you want to released this {contentText}?";
            buttonText = "Release";
            color = Color.Info;
        }
        else if(actionMode == Enums.ActionMode.Cleared)
        {
            contentText = $"Are you sure you want to cleared this {contentText}?";
            buttonText = "Clear";
            color = Color.Info;
        }
        else if(actionMode == Enums.ActionMode.Deactivate)
        {
            contentText = $"Are you sure you want to deactivate this {contentText}?";
            note = "Note: This will remove the item from the list.";
            buttonText = "Deactivate";
            color = Color.Error;
        }
    }
}

